{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nuevo contraseña — Rutek</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <link rel="stylesheet" href="{% static 'css/login.css' %}">
</head>

<body class="login-page">
  <!-- NAVBAR -->
  <header class="navbar">
    <div class="container">
      <div class="nav-row">
        <a class="brand" href="{% url 'home' %}" aria-label="Inicio Rutek">
          <img src="{% static 'img/Rutek-logo.png' %}" alt="Rutek" class="brand-logo">
        </a>
        <nav class="nav-links">
          <a href="{% url 'login' %}">← Volver al login</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Fondo -->
  <div class="auth-bg">
    <div class="pattern"></div>
  </div>

  <main class="auth-wrap">
    <section class="auth-card" role="dialog" aria-labelledby="confirmTitle">
      <div class="card-head">
        <img src="{% static 'img/Rutek-logo.png' %}" alt="Rutek" class="logo-head">
        <h1 id="confirmTitle">Crear nueva contraseña</h1>
        {% if email %}
        <p class="card-subtitle">
          Hemos enviado un código al correo <strong>{{ email }}</strong>.
          Escríbelo aquí junto con tu nueva contraseña.
        </p>
        {% else %}
        <p class="card-subtitle">
          Ingresa el código que recibiste por correo y tu nueva contraseña.
        </p>
        {% endif %}
      </div>

      {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="msg {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
      {% endif %}

      <form class="auth-form" method="post" action="{% url 'password_reset_confirm' %}" novalidate>
        {% csrf_token %}

        <label class="label" for="codigo">Código de verificación</label>
        <div class="field">
          <input
            id="codigo"
            name="codigo"
            type="text"
            maxlength="6"
            placeholder="Ej: 483920"
            value="{{ request.POST.codigo|default:'' }}"
            required
          >
        </div>

        <label class="label" for="password1">Nueva contraseña</label>
        <div class="field">
          <input
            id="password1"
            name="password1"
            type="password"
            placeholder="••••••••"
            required
          >
        </div>

        <label class="label" for="password2">Confirmar contraseña</label>
        <div class="field">
          <input
            id="password2"
            name="password2"
            type="password"
            placeholder="Repite la contraseña"
            required
          >
        </div>

        <button class="btn-primary" type="submit">Guardar nueva contraseña</button>
      </form>

      <p class="foot-note">
        ¿Ya la cambiaste?
        <a class="link" href="{% url 'login' %}">Inicia sesión</a>
      </p>
    </section>
  </main>
</body>
</html>
